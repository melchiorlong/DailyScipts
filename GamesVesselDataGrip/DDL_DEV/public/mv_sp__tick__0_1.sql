create procedure public.mv_sp__tick__0_1(start_xid bigint, end_xid bigint, recompute_mv boolean, finished_xid_list character varying)
	language plpgsql
as $$
BEGIN IF Recompute_MV THEN EXECUTE $_11001100042227201313_$ CREATE TABLE "public"."mv_tbl__tick__0_recomputed" BACKUP YES DISTSTYLE KEY DISTKEY(4)  AS (SELECT "test"."a1" AS "a1", "test"."a2" AS "a2", "test"."a3" AS "a3", CAST("test"."oid" AS INT8) AS "test_oid", CAST(1 AS INT4) AS "num_rec" FROM "public"."test" AS "test" WHERE ((CAST("test"."insertxid" AS INT8) <= $_11001100042227201313_$ || end_xid || $_11001100042227201313_$) AND (CAST("test"."deletexid" AS INT8) > $_11001100042227201313_$ || end_xid || $_11001100042227201313_$)) AND ("test"."a2" = CAST('we' AS TEXT))) $_11001100042227201313_$ ; CREATE OR REPLACE VIEW "public"."tick" AS (SELECT "derived_table1"."a1" AS "a1", "derived_table1"."a2" AS "a2", "derived_table1"."a3" AS "a3" FROM "public"."mv_tbl__tick__0_recomputed" AS "derived_table1"); DROP TABLE "public"."mv_tbl__tick__0"; ALTER TABLE "public"."mv_tbl__tick__0_recomputed" RENAME TO "mv_tbl__tick__0"; CREATE OR REPLACE VIEW "public"."tick" AS (SELECT "derived_table1"."a1" AS "a1", "derived_table1"."a2" AS "a2", "derived_table1"."a3" AS "a3" FROM "public"."mv_tbl__tick__0" AS "derived_table1"); ELSE  EXECUTE $_11001100042227201313_$ INSERT INTO "public"."mv_tbl__tick__0" (SELECT "test"."a1" AS "a1", "test"."a2" AS "a2", "test"."a3" AS "a3", CAST("test"."oid" AS INT8) AS "test_oid", CAST(1 AS INT4) AS "num_rec" FROM "public"."test" AS "test" WHERE (((CAST("test"."insertxid" AS INT8) > $_11001100042227201313_$ || start_xid || $_11001100042227201313_$) OR CAST("test"."insertxid" AS INT8) IN $_11001100042227201313_$ || finished_xid_list || $_11001100042227201313_$) AND ((CAST("test"."insertxid" AS INT8) <= $_11001100042227201313_$ || end_xid || $_11001100042227201313_$) AND (CAST("test"."deletexid" AS INT8) > $_11001100042227201313_$ || end_xid || $_11001100042227201313_$))) AND ("test"."a2" = CAST('we' AS TEXT))) $_11001100042227201313_$; EXECUTE $_11001100042227201313_$ DELETE FROM "public"."mv_tbl__tick__0" USING (SELECT "test"."a1" AS "a1", "test"."a2" AS "a2", "test"."a3" AS "a3", CAST("test"."oid" AS INT8) AS "test_oid", CAST(-1 AS INT4) AS "num_rec" FROM "public"."test" AS "test" WHERE ((CAST("test"."insertxid" AS INT8) <= $_11001100042227201313_$ || start_xid || $_11001100042227201313_$) AND (NOT CAST("test"."insertxid" AS INT8) IN $_11001100042227201313_$ || finished_xid_list || $_11001100042227201313_$ AND (((CAST("test"."deletexid" AS INT8) > $_11001100042227201313_$ || start_xid || $_11001100042227201313_$) OR CAST("test"."deletexid" AS INT8) IN $_11001100042227201313_$ || finished_xid_list || $_11001100042227201313_$) AND (CAST("test"."deletexid" AS INT8) <= $_11001100042227201313_$ || end_xid || $_11001100042227201313_$)))) AND ("test"."a2" = CAST('we' AS TEXT))) AS "mv_tbl__tick__0__deletes" WHERE "mv_tbl__tick__0"."test_oid" = "mv_tbl__tick__0__deletes"."test_oid" $_11001100042227201313_$; END IF;  END;
$$;

